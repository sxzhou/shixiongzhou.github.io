---
layout: post
title:  "Go语言开发最佳实践"
date:   2022-06-12 22:13:00
categories: article
tags: go
author: "sxzhou"
---   

Go语言作为C语言家族的年轻一员，最初Google的设计者站在前人的肩膀上，其目标就是能够给程序员带来快乐、匹配未来硬件发展趋势，且适合开发大型软件系统。  
其核心思想就是：
* 追求简单，少即是多
* 偏好组合，正交解耦
* 原生并发，轻量高效
* 面向工程，自带电池

## 一些最佳实践
1. **使用`gofmt`格式化代码**  
当代码开发人员还在争论不同代码风格时，Rob Pike告诉你：`gofmt`的代码风格不是某个人的最爱，而是所有人的最爱。通过这种"独裁"的方式，终结了关于
代码风格好坏的争论。因此团队开发中，提交代码前一定记得使用`gofmt`格式化代码。  
---
2. **命名相关**
* 包名使用小写字母
* 包名尽量与导入路径最后一个路径分段保持一直
* 变量名使用小驼峰命名法，如需导出使用大驼峰
* 变量声明与使用的距离尽量短
* 常量使用大写字母
---
3. **变量声明**  
推荐声明聚类和就近，对于局部逻辑需要使用的变量，他们之间可能存在一定关联，可以如下一起声明。
```go
var (
	v1 int64
	v2 string
	v3 []int
)
```
延迟初始化，使用`var`关键字：  
```go
var val int
for i := 0; i < 10; i++ {
	if vals[i] > target {
		val = i
    }
}
```
声明且显式初始化，使用短变量声明形式：
```go
val1 := 12
val2 := "test"
```
---
3. 保持零值可用
```go
var s []int
s = append(s, 1)
s = append(s, 2)
```
如上代码段，声明之后没有初始化就使用，在很多语言中是报错的，但是在go的设计中，是提倡零值可用的。原生类型都有默认零值。
我们在定义自己的类型时也推荐零值可用。但是也要注意，零值并不是所有操作都可用，对于以上代码，如果初始化后根据下表取值，那么就会报错了。